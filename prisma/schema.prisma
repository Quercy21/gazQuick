generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum RoleEmploye {
  vendeur
  livreur
  Client
}

enum ModePaiement {
  OrangeMoney
  MobileMoney
  Espece
}

enum StatutLivraison {
  nouvelle
  assignee
  enCours
  achevee
  annulee
}

model Utilisateur {
  id             Int          @id @default(autoincrement())
  prenom         String
  nom            String
  sexe           String
  nomUtilisateur String       @unique
  motDePasse     String
  role           RoleEmploye
  bouteilles     BouteilleGaz[]
  commandes      Commande[]
  image          String?
}

model BouteilleGaz {
  id         Int        @id @default(autoincrement())
  reference  String
  poids      Float
  marque     String
  couleur    String
  qte        Int
  dateAjout  DateTime
  ajoutePar  Utilisateur @relation(fields: [ajouteParId], references: [id])
  ajouteParId Int
  imageUrl   String?
}

model Panier {
  id       Int      @id @default(autoincrement())
  articles Article[]
}

model Article {
  id       Int      @id @default(autoincrement())
  qte      Int
  reference String
  poids    Float
  marque   String
  prix     Float
  imageUrl String?
  panier   Panier   @relation(fields: [panierId], references: [id])
  panierId Int
}

model Commande {
  id             Int           @id @default(autoincrement())
  dateEnreg      DateTime
  valide         Boolean
  annuleLe       DateTime?
  annuleParClient Boolean
  //validePar      Utilisateur?  @relation(fields: [valideParId], references: [id])
  valideParId    Int?
  localisation   String
  qte            Int
  dateValidation DateTime
  modePaiement   ModePaiement
  //livraison      Livraison?
  utilisateur    Utilisateur  @relation(fields: [utilisateurId], references: [id])
  utilisateurId  Int
}

model Livraison {
  id            Int             @id @default(autoincrement())
  //commande      Commande        @relation(fields: [commandeId], references: [id])
  commandeId    Int
  statut        StatutLivraison
  livreLe       DateTime
  localisation  String
}